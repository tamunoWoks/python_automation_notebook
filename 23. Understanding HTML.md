## Understanding HTML
HTML is the format in which web pages are written, while Cascading Style Sheets (CSS) are a way to make categorical changes to the look of HTML elements in a web page. In this section, we’ll learn how to access your web browser’s powerful Developer Tools, which make scraping information from the web much easier.

### Exploring the Format:
An HTML file is a plaintext file with the *.html* file extension. The text in these files is surrounded by HTML *tags*, which are words enclosed in angle brackets (<>). The tags tell the browser how to format the web page. A starting tag and closing tag can enclose some text to form an HTML *element*. The text to display is the content between the starting and closing tags. For 
example, the following HTML will display **`Hello`**`, world!` in the browser, with *Hello* in bold:
```html
<b>Hello</b>, world!
```
The opening `<b>` tag says that the enclosed text will appear in bold. The closing `</b>` tag tells the browser where the end of the bold text is. Together, they form an element: `<b>Hello</b>`.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;There are many different tags in HTML. Some of these tags have extra properties in the form of *attributes* within the angle brackets. For example, the `<a>` tag encloses text that should be a link, and the `href` attribute determines what URL to link to. Here’s an example:
```html
<a href ="https://inventwithpython.com">This text is a link</a>
```
Some elements have an `id` attribute used to uniquely identify the element in the page. You’ll often instruct your programs to seek out an element by its `id` attribute, so finding this attribute using the browser’s Developer Tools is a common task when writing web scraping programs.

### Viewing a Web Page’s Source:
You’ll need to look at the HTML of the web pages your programs will work with, called the *source*. To do this, right-click any web page in your web browser (or ctrl-click it on macOS), and select **View Source** or **View page source**. The source is the text your browser actually receives. The browser knows how to display, or _render_, the web page from this HTML.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You won’t need HTML mastery to write simple web scraping programs. You just need enough knowledge to pick out data from an existing site.

### Opening Your Browser’s Developer Tools:
In addition to viewing a web page’s source, you can look through a page’s HTML using your browser’s Developer Tools. In Firefox, Chrome, and Microsoft Edge, you can press F12 to make the tools appear. Pressing F12 again will make them disappear.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After enabling or installing the Developer Tools in your browser, right click any part of the web page and select **Inspect Element** from the context menu to bring up the HTML responsible for that part of the page. This will help you parse HTML for your web scraping programs.

#### NOTE: DON’T USE REGULAR EXPRESSIONS TO PARSE HTML
Locating a specific piece of HTML (or a piece of XML, JSON, TOML, or YAML) in a string seems like a perfect case for regular expressions . However, I advise you not to do this . HTML can be formatted in many ways and still be considered valid, but trying to capture all these possible variations in a regular expression is tedious and error prone . Using a module developed specifically for parsing HTML, such as `bs4`, is less likely to result in bugs.

### Finding HTML Elements:
Once your program has downloaded a web page using the requests module, you’ll have the page’s HTML content as a single string value. Now you need to figure out which part of the HTML corresponds to the information on the web page you’re interested in.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is where the browser’s Developer Tools can help. Say you want to write a program to pull weather forecast data from _https://weather.gov_. Before writing any code, do a little research. If you visit the site and search for the 94105 ZIP code, it should take you to a page showing the forecast for that area.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;What if you’re interested in scraping the weather information for that ZIP code? Right-click that information on the page (or ctrl-click on macOS) and select **Inspect Element** from the context menu that appears. This brings up the Developer Tools window, which shows you the HTML that produces that particular part of the web page. Note that if the _https://weather.gov_ site changes the design of its web pages, you’ll need to repeat this process to inspect the new elements.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;From the Developer Tools, you can see that the HTML responsible for the forecast part of a web page as thus:
```html
<div class="col-sm-10 forecast-text">Sunny, with a high near 64. West wind 11 to 16 mph, with gusts as high as 21 mph.</div>
```
It seems that the forecast information is contained inside a `<div>` element with the `forecast-text` CSS class.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Right-click this element in the browser’s developer console and, from the context menu that appears, select **Copy>CSS Selector**. This option copies a string such as `'div.row-odd:nth-child(1) > div:nth-child(2)'` to the clipboard. You can pass it to Beautiful Soup’s `select()` method or Selenium’s `find_element()` method, to find the element in the string.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The CSS _selector_ syntax used in this string specifies which HTML elements to retrieve from a web page. You can obtain the selector from the browser Developer Tools, as we did here. _XPath_ is another syntax for selecting HTML elements.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Keep in mind that when a website changes its layout, you’ll need to update the HTML tags your scripts check. This can happen with little or no warning, so be sure to keep an eye on your program in case it suddenly displays errors about not being able to find elements. In general, it’s better to use a website’s API if it offers one, as it’s much less likely to change than the website itself.

## Parsing HTML with Beautiful Soup
Beautiful Soup is a package for extracting information from an HTML page. You’ll use the name `beautifulsoup4` to install the package but the shorter module name `bs4` to import it. In this section, we’ll use Beautiful Soup to parse (that is, analyze and extract the parts of) the HTML file at _https://autbor.com/example3_ .html, which has the following content:
```html
<!-- This is an HTML comment. -->
<html>
<head>
  <title>Example Website Title</title>
  <style>
      .slogan {
          color: gray;
          font-size: 2em;
      }
  </style>
</head>
<body>
  <h1>Example Website</h1>
  <p>This &lt;p&gt; tag puts <b>content</b> into a <i>single</i> paragraph.</p>
  <p><a href ="https://inventwithpython.com">This text is a link</a> to books by <span id=
"author">Al Sweigart</span>.</p>
  <p><img src="wow_such_zophie_thumb.webp" alt="Close-up of my cat Zophie." /></p>
  <p class="slogan">Learn to program in Python!</p>
  <form>
      <p><label>Username: <input id="login_user" placeholder="admin" /></label></p>
      <p><label>Password: <input id="login_pass" type="password" placeholder="swordfish" />
  </form>
</label></p>
  <p><label>Agree to disagree: <input type="checkbox" /></label><input type="submit" 
value="Fake Button" /></p>
</body>
</html>
```
Note that the login form on this page is fake and is included for cosmetic value.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Even a simple HTML file involves many different tags and attributes, and matters quickly get confusing when it comes to complex websites. Thankfully, Beautiful Soup makes working with HTML much easier.

### Creating a Beautiful Soup Object:
The `bs4.BeautifulSoup()` function accepts a string containing the HTML it will parse, then returns a `BeautifulSoup` object. For example, enter the following while your computer is connected to the internet:
```python
import requests, bs4

res = requests.get('https://autbor.com/example3.html')
res.raise_for_status()
example_soup = bs4.BeautifulSoup(res.text, 'html.parser')
type(example_soup) # <class 'bs4.BeautifulSoup'>
```
This code uses `requests.get()` to download the main page of the Automate the Boring Stuff website and then passes the response’s text attribute to `bs4.BeautifulSoup()`. Beautiful Soup can parse different formats, and the '`html.parser'` argument tells it that we are parsing HTML. Finally, the code stores the returned `BeautifulSoup` object in a variable named `example_soup`.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You can also load an HTML file from your hard drive by passing a `File` object to `bs4.BeautifulSoup()`. Enter the following (after making sure the example3.html file is in the working directory):
```python
import bs4
with open('example3.html') as example_file:
     example_soup = bs4.BeautifulSoup(example_file, 'html.parser')
 
type(example_soup) # <class 'bs4.BeautifulSoup'>
```
Once you have a `BeautifulSoup` object, you can use its methods to locate specific parts of an HTML document.

### Finding an Element:
You can retrieve a web page element from a   BeautifulSoup   object by calling its `select()` method and passing a CSS selector string for the element you’re looking for. The method returns a list of Tag objects, which represent matching HTML elements. Tyhe table below shows examples of the most common CSS selector patterns using `select()`.
#### Example of CSS Selectors:
| Selector passed to the 'select()` method | Will match... |
|:-----------------------------------------|:--------------|
| soup.select('div') | All elements named `<div>` |
| soup.select('#author') | The element with an id attribute of author |
| soup.select('.notice') | All elements that use a CSS class attribute named notice |
| soup.select('div span') | All elements named `<span>` that are within an element named `<div>` |
| soup.select('div > span') | All elements named `<span>` that are directly within an element named `<div>`, with no other element in between |
| soup.select('input[name]') | All elements named `<input>` that have a name attribute with any value |
| soup.select('input[type="button"]') | All elements named `<input>` that have an attribute named type with the value button |

You can combine the various selector patterns to make sophisticated matches. For example, `soup.select('p #author')` matches any element that has an `id` attribute of author, as long as it’s also inside a `<p>` element.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You can pass tag values to the `str()` function to show the HTML tags they represent. Tag values also have an `attrs` attribute containing all their HTML attributes as a dictionary. For example, download the _https://autbor.com/example3.html_ page as _example3.html_, then enter the following:
```python
import bs4

example_file = open('example3 .html')
example_soup = bs4.BeautifulSoup(example_file.read(), 'html.parser')
elems = example_soup.select('#author')

type(elems) # elems is a list of Tag objects.
<class 'bs4.element.ResultSet'>

len(elems) # 1

type(elems[0])
<class 'bs4.element.Tag'>

str(elems[0])  # The Tag object as a string
'<span id="author">Al Sweigart</span>'

elems[0].getText()  # The inner text of the element
'Al Sweigart'

elems[0].attrs
{'id': 'author'}
```
This code finds the element with `id="author"` in our example HTML. We use `select('#author')` to return a list of all the elements with `id="author"`. We then store this list of `Tag` objects in the variable `elems`. Running `len(elems)` tells us there is one `Tag` object in the list, meaning there was one match.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Passing the element to `str()` returns a string with the starting and closing tags and the element’s text. Calling `getText(`) on the element returns the element’s text, or the content between the opening and closing tags: in this case, `'Al Sweigart'`. Finally, `attrs` gives us a dictionary with the element’s attribute, `'id'`, and the value of the `id`attribute, `'author'`.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You can also pull all the `<p>` elements from the `BeautifulSoup` object. For example:
```python
p_elems = example_soup.select('p')
str(p_elems[0]) # '<p>This &lt;p&gt; tag puts <b>content</b> into a <i>single</i> paragraph.</p>'

p_elems[0].getText() # 'This <p> tag puts content into a single paragraph.'

str(p_elems[1]) # '<p> <a href ="https://inventwithpython .com /">This text is a link</a> to books by <span id="author">Al Sweigart</span>.</p>'

p_elems[1].getText() # 'This text is a link to books by Al Sweigart.'

str(p_elems[2]) # '<p><img alt="Close-up of my cat Zophie." src="wow_such_zophie_thumb.webp"/></p>'

p_elems[2].getText() # ''
```
