### Accessing a Weather API
You can write programs to interact with other programs through their *application programming interface (API)*, which is the specification that defines how one piece of software (such as your Python program) can communicate with another piece of software (such as the web server for a weather site). Online services often have APIs. For example, you could write a Python script to post to your social media accounts or download new photos. We’ll write a script that accesses weather information from the free OpenWeather website.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Almost all online services require you to register an email address to use their API. Even if the API is free, they may have limits to how many API requests you can make per hour or day. If you’re worried about receiving spam email, you can use a temporary, disposable email address service such as *https://10minutemail.com*. Keep in mind that you should use such services only to register for online accounts you don’t care about, as an unscrupulous email service could take control of your online account by making a password reset request in your name.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To start, sign up for a free account at *https://openweathermap.org*. The free account tier limits you to making 60 API requests per minute. This is more than enough for your small or medium-sized programming projects. If your program needs more than this limit (say, because it’s processing requests from hundreds of simultaneous visitors to your website), you can purchase a paid account tier. Online services will give you an *API key*, which is sort 
of a password that identifies your account in your API requests. Keep this API key a secret! Anyone with this key can make API requests credited to your account. If you write a program that uses an API key, consider having the program read a text file that contains the key instead of including the API key directly in your source code. This way, you can share your program with others (who can sign up for their own API key) without worrying about exceeding the API request limits of your account.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Many HTTP APIs deliver their responses as one large string. This string is often formatted as JSON or XML. `json.loads(response.text)` returns a Python data structure of lists and dictionaries containing the JSON 
data in `response.text`. Our examples will store this data in a variable named `response_data`, but this is an arbitrary choice, and you can use any variable name you’d like.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All online services document how to use their API. OpenWeather provides its documentation at *https://openweathermap.org/api*. After you’ve logged in to your account and obtained your API key from the *My API keys* page at *https://home.openweathermap.org/api_keys*, use it in the following interactive shell code. I’ll use '30ee784a80d81480dab1749d33980112' as a fake API key in this example. Don’t use this fake API key example in your code; it won’t work.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;First, you’ll use OpenWeather to find the latitude and longitude of San Francisco:
```python
import requests

city_name = 'San Francisco'
state_code = 'CA'
country_code = 'US'
API_key = '30ee784a80d81480dab1749d33980112'  # Not a real API key

response = requests.get(f'https://api.openweathermap.org/geo/1.0/direct?q={city_name},{state_code},country_code}&appid=API_key}')
response.text  # This is a Python string
'[{"name":"San Francisco","local_names":{"id":"San Francisco",--snip-
,"lat":37.7790262,"lon":-122.419906,"country":"US","state":"California"}]'

import json
response_data = json.loads(response.text)
response_data  # This is a Python data structure.
[{"name":"San Francisco","local_names":{"id":"San Francisco",--snip-
,"lat":37.7790262,"lon":-122.419906,"country":"US","state":"California"}]
```
To understand the data in the response, you should look at the online API documentation for OpenWeather or examine the dictionary in `response_data` in the interactive shell. You’ll learn that the response is a list whose first item (at index 0) is a dictionary with keys `'lat'` and `'lon'`. The values for these keys are float values of the latitude and longitude:
```python
response_data[0]['lat'] # 37.7790262
response_data[0]['lon'] # -122.419906
```
The specific URL used to make an API request is called the *endpoint*. The f-strings in this example replace the parts in curly brackets with the values of variables. The `direct?q={city_name},{state_code},{country_code}&appid={API_key}'` in the previous example becomes `direct?q=San Francisco,CA,US&appid=30ee784a80d81480dab1749d33980112'`.  
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Next, you can use this latitude and longitude information to find the current temperature of San Francisco:
```python
lat = json.loads(response.text)[0]['lat']
lon = json.loads(response.text)[0]['lon']

response = requests .get(f'https://api .openweathermap .org /data /2 .5/weather?lat={lat}&lon={lon}&appid={API_key}')
response_data = json.loads(response.text)
response_data # {'coord': {'lon': -122.4199, 'lat': 37.779}, 'weather': [{'id': 803, --snip-
'timezone': -25200, 'id': 5391959, 'name': 'San Francisco', 'cod': 200}
response_data['main']['temp'] # 285.44

round(285.44 - 273.15, 1)  # Convert Kelvin to Celsius.
12.3
round(285.44 * (9 / 5) - 459.67, 1)  # Convert Kelvin to Fahrenheit.
54.1
```
